
<html>
  
    <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Do you want to develop an android weather app?. Read this tutorial and you can find all the information to create and android app. Here you can find source code about android weather" />
	<meta content='android weather, weather api,code,source,weather,weather library,yahoo! weather, weatherunderground,api,android weather,android app,open source library' name='keywords'/>
	<meta content='https://plus.google.com/111119552788205366558' name='author'/>
	<meta content='https://plus.google.com/111119552788205366558' name='publisher'/>

    <meta name="google-site-verification" content="2gOcYkpKozlNli7dQdtWHFue5qWjPw7YCynvKKb9Xkk" />

	<link rel="stylesheet" href="./css/bootstrap-combined.min.css">
	<link rel="stylesheet" href="./css/site.css">
	<link rel="stylesheet" href="./css/bjqs.css">
	<link href="http://fonts.googleapis.com/css?family=Roboto:400,300italic,100,100italic,300" rel="stylesheet" type="text/css">

	<script src="./javascripts/jquery-1.7.1.min.js"></script>
    <script src="./javascripts/bjqs-1.3.min.js"></script>
	<script src="./javascripts/jquery.smooth-scroll.min.js"></script>
	
	<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "7986e5e5-4e81-4997-a3dd-43955d4a952c", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>


    <title>Android Weatherlib Getting started</title>
  </head>


   <body data-target=".content-nav"  >


    <header style="background-color:#4CAF50">
    
    <ul class="nav nav-pills" style="background:#FFFFFF; width:100%">
  <li role="presentation"><a href="./index.html">Home</a></li>
  <li role="presentation"><a href="./android_weatherlib_start.html">Getting started</a></li>
  <li role="presentation"><a href="./android_weatherlib_search_city.html">Documentation</a></li>
  <li role="presentation"><a href="./javadoc/index.html">Javadoc</a></li>

</ul>

      <div class="container" >

        <div class="row"  >
		  <div class="span1" style="margin-top:5px">
			<a href="https://plus.google.com/communities/117946761543584564970" target="_blank"><img class="img-circle" src="images/weatherlib_icon.png" alt="Weather library"/></a>
		  </div>

          <div class="span5">		    
            <h1 style="text-shadow: 2px 2px 2px rgba(150, 150, 150, 1);">Weatherlib <br/> <font style="font-size:large; font-style:italic;"></font></h1> 
          </div>
          <div class="span6">
            <menu>
              <ul>
                <li><a href="#starthere" class="menu download">Latest version <strong>1.6.0</strong></a></li>
                <li><a href="https://github.com/survivingwithandroid/WeatherLib" data-title="View GitHub Project" class="menu github"><img src="images/icon-github.png" alt="GitHub"/></a></li>               
              </ul>
            </menu>
          </div>
      </div>

    </header>



<section id="body">
<div class="container">

<div class="row">

<span class='st_sharethis_large' displayText='ShareThis'></span>
<span class='st_googleplus_large' displayText='Google +'></span>
<span class='st_facebook_large' displayText='Facebook'></span>
<span class='st_twitter_large' displayText='Tweet'></span>
<span class='st_linkedin_large' displayText='LinkedIn'></span>
<span class='st_dzone_large' displayText='DZone'></span>
<span class='st_email_large' displayText='Email'></span>
</div>

<div class="row">
<div class="span12"> 
<br/><br/></br/><h3 id="starthere">Getting started</h3>

                         
                        
			
			
<p>
			 To create a WeatherClient we need a few lines. The WeatherClient must be used to get weather information.</p>

			 
<p>The first thing, we have to instantiate the builder. The builder is used to create the client:</p>

			 
<pre class="prettyprint">WeatherClient.ClientBuilder builder = new WeatherClient.ClientBuilder();</pre>

			 
<p>then we have to instantiate the WeatherConfig. If you instantiate a WeatherConfig without setting parameters, 
the default paramters will be used. The WeatherConfig is a class that is used to control the general behaviour of the client. 
Using this class, you can set if the metric or imperial system must be used or the number of days in the forecast.
By now we can simply instantiate the class without setting parameters so that the default values will be used.</p>

			 
<pre class="prettyprint">WeatherConfig config = new WeatherConfig();</pre>

			 
<p>Now we can create our client and the weather information. As explained before, other than the configuration we have to
specify the transport library we want to used and the weather provider. For example:</p>

			 
<pre class="prettyprint">WeatherClient client = builder.attach(getActivity())<br>            .provider(new ForecastIOProviderType())<br>            .httpClient(com.survivingwithandroid.weather.lib.client.okhttp.WeatherDefaultClient.class)<br>            .config(config)<br>            .build();</pre>

			
<p>
			In this new way we use a builder to create the <code>Weatherclient</code>.
At line 2, we set the Weather provider: as you already know there are
four different weather provider supported by now by the lib:</p>

			
<ul>

			  <li>Openweathermap -&gt; <code>OpenweathermapProviderType</code></li>
			  <li>Yahoo! Weather -&gt; <code>YahooWeatherProviderType</code></li>
			  <li>Weatherundergroung -&gt; <code>WeatherundergroundProviderType</code></li>
			  <li>Forecast.io -&gt; <code>ForecastIOProviderType</code></li>
			
</ul>

			
<p> At line 3 we set the HTTP client that the library uses to connect
to the remote server: there a three different clients supported by the
lib:</p>

			
<ul>

               <li><a href="https://android.googlesource.com/platform/frameworks/volley" target="_blank">Volley Client</a> -&gt; <code>com.survivingwithandroid.weather.lib.client.volley.WeatherClientDefault</code></li> (available from 1.0 version)
			   <li><a href="http://square.github.io/okhttp/" target="_blank">OkHttp Client</a> -&gt; <code>com.survivingwithandroid.weather.lib.client.okhttp.WeatherClientDefault</code></li> (available from 1.5 version)
			   <li>Standard client -&gt; <code>com.survivingwithandroid.weather.lib.StandardHttpClient</code></li> (available from 1.0 version)
			
</ul>

			
<p>
			<strong>One important aspect we must notice is that the first two client are asynchronous client, while the last one is synchronous.</strong>
			</p>
<p>In the build.gradle we have to add dependecies, according to the type of the client you chose</p>

			
			
<div class="panel panel-info">
			  <div class="panel-heading"><h4 class="panel-title">Volley HTTP Library</h4></div>
			  <p>
			    </p><pre class="prettyprint">dependencies {					<br>	compile 'com.survivingwithandroid:weatherlib:1.6.0'<br>	compile 'com.survivingwithandroid:weatherlib_volleyclient:1.6.0'<br>	compile 'com.mcxiaoke.volley:library:1.0.6@aar' (or whatever you like)<br>}<br></pre>
			  
			</div>
<div class="panel panel-info"><div class="panel-heading"><h4 class="panel-title">OkHttp HTTP Library</h4></div>
			  <p>
			    </p><pre class="prettyprint">dependencies {					<br>	compile 'com.survivingwithandroid:weatherlib:1.6.0'<br>	compile 'com.survivingwithandroid:weatherlib_okhttpclient:1.6.0'<br>	compile 'com.squareup.okhttp:okhttp:2.0.+'<br>}<br></pre>
			  
			</div>
<div class="panel panel-info"><div class="panel-heading"><h4 class="panel-title">Standard client</h4></div>
			  <p>
			    </p><pre class="prettyprint">dependencies {					<br>	compile 'com.survivingwithandroid:weatherlib:1.6.0'	<br>}<br></pre>	
			  
			</div>


		
<h3>Configuration</h3>

			
<p>
		Going deeper into the configuration, we can configure our client using <code>WeatherConfig</code> attribute, as shown below:</p>

			
<pre class="prettyprint">WeatherConfig config = new WeatherConfig();<br>config.unitSystem = WeatherConfig.UNIT_SYSTEM.M;<br>config.lang = "en"; // If you want to use english<br>config.maxResult = 5; // Max number of cities retrieved<br>config.numDays = 6; // Max num of days in the forecast<br>	</pre>

			
<p>We can change the configuration paramter without rebuilding the client, but we have to update the configuration in our client and provider using <code>updateWeatherConfig</code> and passing the new configuration:</p>

			
<pre class="prettyprint">client.updateWeatherConfig(config);	</pre>

	
<h3>Permissions in Manifest</h3>
		
<p>One aspect we have to consider is the permission in <code>Manifest.xml</code> so that the lib can connect to internet and use GPS device if you need:</p>
<pre class="prettyprint">
    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
    &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
</pre>

<h3>Simple Weatherlib activity sample</h3>
<p>If you want to go and use the lib directly here there is an example that shows how to create an Activity that gets current weather information</p>
<p>
<script src="https://gist.github.com/survivingwithandroid/d671961572899cb8f4b4.js"></script>
</p>
 </div>
</div>
</div>
<div>
<div class="row">
<div class="span12">&nbsp;</div>
</div>
</div>
<!-- Add next and back -->
<div class="row" style="height: 80px;">
<ul class="pager">
  <li><a href="./android_weatherlib_./index.html">Home</a></li>
  <li><a href="./android_weatherlib_search_city.html">Documentation</a></li>
</ul>
</div>
<div>

<!-- Disquss -->
<div class="container">
    <div class="row">
    <div class="span10"> 
              <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES * * */
                var disqus_shortname = 'weatherlib';
                
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>
     </div>
</div>
<!-- End disquess -->
<div class="row">
<div class="span12">&nbsp;</div>
</div>
</div>
	<div class="container" style="width:100%; padding-left:10px; padding-right:10px;">
	<footer style="width:100%">
	<div class="row" style="background:#BBDEFB;">
		<span class="12">
			<center><h6>Project maintained by Francesco Azzola</h6></center>
		</span>
	</div>
	<div class="row" style="background:#BBDEFB;">

		<div class="span3">
			<h4>Info</h4>
			<ul>
			  <li><a href="mailto:survivingwithandroid@gmail.com">Contact me</a></li>
			  <li><a href="https://github.com/survivingwithandroid">My Github Projects</a></li>
			  <li><a href="https://github.com/survivingwithandroid/WeatherLib/wiki/Tutorial">Wiki</a></li>
			</ul>

		</div>
		<div class="span3">
			<h4>Social</h4>
			<ul>
			  <li><a href="http://plus.google.com/+FrancescoAzzola" target="_blank">Follow me</a></li>
			  <li><a href="https://plus.google.com/communities/117946761543584564970">Join the G+ Weather community</a></li>
			  <li><a href="http://it.linkedin.com/in/francescoazzola">Linkedin profile</a></li>
			</ul>

		</div>
		<div class="span3">
			<h4>Useful links</h4>
			<ul>
			  <li><a href="http://openweathermap.org/" target="_blank">Openweathermap</a></li>
			  <li><a href="https://developer.yahoo.com/weather/" target="_blank">Yahoo! Weather</a></li>
			  <li><a href="http://www.wunderground.com/weather/api/" target="_blank">Weather underground</a></li>
			  <li><a href="http://forecast.io/" target="_blank">Forecast.io</a></li>
			</ul>
		</div>	
		<div class="span2">
			<h4>Blog</h4>
			<ul>
			  <li><a href="http://www.survivingwithandroid.com" target="_blank">Surviving with android blog</a></li>
			</ul>
		</div>	
		<div class="span1">
Master <a href="https://travis-ci.org/survivingwithandroid/WeatherLib" >
    <img src="https://travis-ci.org/survivingwithandroid/WeatherLib.svg?branch=master" alt="Master status">
  </div>
    </div>	
	</footer>
	</div> </div>
</section>
</body>
</html>
